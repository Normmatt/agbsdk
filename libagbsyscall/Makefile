include $(DEVKITARM)/base_tools
export AR := $(PREFIX)ar
export AS := $(PREFIX)as

ifeq ($(OS),Windows_NT)
EXE := .exe
else
EXE :=
endif

ASFLAGS := -mcpu=arm7tdmi
ARFLAGS := rc

ASM_SRCS := libagbsyscall.s
ASM_OBJS := $(ASM_SRCS:%.s=%.o)

LIB := libagbsyscall.a

.PHONY: all clean $(LIB)

all: $(LIB)

clean:
	rm -f $(LIB) $(ASM_OBJS)

$(LIB): $(ASM_OBJS)
	$(AR) $(ARFLAGS) $@ $^

%.o: %.s
	$(AS) $(ASFLAGS) -o $@ $*.s